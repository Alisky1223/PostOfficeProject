@using MudBlazor
@using MudBlazor.Services
@inject ISnackbar Snackbar

<MudDialog MaxWidth="MaxWidth.Small" FullWidth="true">

    <TitleContent>

        <MudText Style="text-align:center" Typo="Typo.h5" Color="Color.Error">

            if you change role your current data will lost

        </MudText>

    </TitleContent>

    <DialogContent>

        <MudStack Spacing="2">

            <MudText Typo="Typo.subtitle1">

                Enter Your Personal Code

            </MudText>

            <MudTextField @bind-Value="personalcode"
                          Label="PersonalCode"
                          Variant="Variant.Outlined"
                          FullWidth="true"
                          Immediate="true"
                          Adornment="Adornment.Start"
                          AdornmentIcon="@Icons.Material.Filled.Lock" />

        </MudStack>

    </DialogContent>

    <DialogActions>

        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="Submit">

            Ok

        </MudButton>

        <MudButton Variant="Variant.Outlined" Color="Color.Default" OnClick="Cancel">

            Cancel

        </MudButton>

    </DialogActions>

</MudDialog>

@code {

    [Parameter] public int? UserId { get; set; }

    [CascadingParameter]
    private IMudDialogInstance? MudDialog { get; set; }

    private string? personalcode;

    private void Submit()
    {
        if (string.IsNullOrWhiteSpace(personalcode))
        {

            Snackbar.Add("Personal Code can't be null", Severity.Error);

            return;

        }

        MudDialog?.Close(DialogResult.Ok(personalcode));

    }

    private void Cancel() => MudDialog?.Cancel();

}
